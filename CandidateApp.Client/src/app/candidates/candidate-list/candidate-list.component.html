<div class="container">
    <h2>Candidate List</h2>

    <div class="options">
        <a [routerLink]="['/candidates/new']" mat-raised-button color="primary">Add Candidate</a>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
    </div>

    <table mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8">
        <!-- First Name Column -->
        <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef> First Name </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.firstName }} </td>
        </ng-container>

        <!-- Last Name Column -->
        <ng-container matColumnDef="surname">
            <th mat-header-cell *matHeaderCellDef> Surname </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.surname }} </td>
        </ng-container>

        <!-- Date of Birth Column -->
        <ng-container matColumnDef="dateOfBirth">
            <th mat-header-cell *matHeaderCellDef> Date of Birth </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.dateOfBirth | date }} </td>
        </ng-container>

        <!-- Address Column -->
        <ng-container matColumnDef="address1">
            <th mat-header-cell *matHeaderCellDef> Address </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.address1 }} </td>
        </ng-container>

        <!-- Town Column -->
        <ng-container matColumnDef="town">
            <th mat-header-cell *matHeaderCellDef> Town </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.town }} </td>
        </ng-container>

        <!-- Country Column -->
        <ng-container matColumnDef="country">
            <th mat-header-cell *matHeaderCellDef> Country </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.country }} </td>
        </ng-container>

        <!-- Phone Mobile Column -->
        <ng-container matColumnDef="phoneMobile">
            <th mat-header-cell *matHeaderCellDef> Phone Mobile </th>
            <td mat-cell *matCellDef="let candidate"> {{ candidate.phoneMobile }} </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let candidate">
                <a [routerLink]="['/candidates', candidate.id, 'edit']" mat-button color="primary">Edit</a>
            </td>
        </ng-container>

        <!-- Main Row -->
        <tr mat-header-row *matHeaderRowDef="mainColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: mainColumns;" class="candidate-row"></tr>

        <!-- Skills Row -->
        <ng-container matColumnDef="skills">
            <td mat-cell *matCellDef="let candidate" [attr.colspan]="mainColumns.length" class="skill">
                <div *ngIf="candidate.skills">
                    <strong>Skills:</strong> {{ getCandidateSkills(candidate) }}
                </div>
            </td>
        </ng-container>
        <tr mat-row *matRowDef="let row; columns: ['skills'];" class="skills-row"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="10" showFirstLastButtons></mat-paginator>
</div>
